# 1 "/home/vdelacruz/Documents/Ethernet 2 Ports/module_xtcp/src/xtcp_uip/uip.c"
# 1 "/home/vdelacruz/Documents/Ethernet 2 Ports/app_simple_webserver/.build_IPV4//"
# 1 "<built-in>"
# 1 "<command-line>"
# 1 "/home/vdelacruz/Documents/Ethernet 2 Ports/module_xtcp/src/xtcp_uip/uip.c"
# 87 "/home/vdelacruz/Documents/Ethernet 2 Ports/module_xtcp/src/xtcp_uip/uip.c"
# 1 "/home/vdelacruz/Documents/Ethernet 2 Ports/module_xtcp/src/xtcp_uip/uip.h" 1
# 62 "/home/vdelacruz/Documents/Ethernet 2 Ports/module_xtcp/src/xtcp_uip/uip.h"
# 1 "/home/vdelacruz/Documents/Ethernet 2 Ports/module_xtcp/src/xtcp_uip/uipopt.h" 1
# 76 "/home/vdelacruz/Documents/Ethernet 2 Ports/module_xtcp/src/xtcp_uip/uipopt.h"
# 1 "/home/vdelacruz/Documents/Ethernet 2 Ports/module_xtcp/src/xtcp_uip/uip-conf.h" 1
# 63 "/home/vdelacruz/Documents/Ethernet 2 Ports/module_xtcp/src/xtcp_uip/uip-conf.h"
# 1 "/home/vdelacruz/XMOS/xTIMEcomposer/Community_13.1.0//target/include/inttypes.h" 1 3 4
# 16 "/home/vdelacruz/XMOS/xTIMEcomposer/Community_13.1.0//target/include/inttypes.h" 3 4
# 1 "/home/vdelacruz/XMOS/xTIMEcomposer/Community_13.1.0//target/include/_ansi.h" 1 3 4
# 15 "/home/vdelacruz/XMOS/xTIMEcomposer/Community_13.1.0//target/include/_ansi.h" 3 4
# 1 "/home/vdelacruz/XMOS/xTIMEcomposer/Community_13.1.0//target/include/newlib.h" 1 3 4
# 16 "/home/vdelacruz/XMOS/xTIMEcomposer/Community_13.1.0//target/include/_ansi.h" 2 3 4
# 1 "/home/vdelacruz/XMOS/xTIMEcomposer/Community_13.1.0//target/include/sys/config.h" 1 3 4



# 1 "/home/vdelacruz/XMOS/xTIMEcomposer/Community_13.1.0//target/include/machine/ieeefp.h" 1 3 4
# 5 "/home/vdelacruz/XMOS/xTIMEcomposer/Community_13.1.0//target/include/sys/config.h" 2 3 4
# 17 "/home/vdelacruz/XMOS/xTIMEcomposer/Community_13.1.0//target/include/_ansi.h" 2 3 4
# 17 "/home/vdelacruz/XMOS/xTIMEcomposer/Community_13.1.0//target/include/inttypes.h" 2 3 4
# 1 "/home/vdelacruz/XMOS/xTIMEcomposer/Community_13.1.0//target/include/stdint.h" 1 3 4
# 45 "/home/vdelacruz/XMOS/xTIMEcomposer/Community_13.1.0//target/include/stdint.h" 3 4
typedef signed char int8_t ;
typedef unsigned char uint8_t ;




typedef signed char int_least8_t;
typedef unsigned char uint_least8_t;




typedef signed short int16_t;
typedef unsigned short uint16_t;
# 71 "/home/vdelacruz/XMOS/xTIMEcomposer/Community_13.1.0//target/include/stdint.h" 3 4
typedef int16_t int_least16_t;
typedef uint16_t uint_least16_t;
# 83 "/home/vdelacruz/XMOS/xTIMEcomposer/Community_13.1.0//target/include/stdint.h" 3 4
typedef signed long int32_t;
typedef unsigned long uint32_t;
# 101 "/home/vdelacruz/XMOS/xTIMEcomposer/Community_13.1.0//target/include/stdint.h" 3 4
typedef int32_t int_least32_t;
typedef uint32_t uint_least32_t;
# 123 "/home/vdelacruz/XMOS/xTIMEcomposer/Community_13.1.0//target/include/stdint.h" 3 4
typedef signed long long int64_t;
typedef unsigned long long uint64_t;
# 133 "/home/vdelacruz/XMOS/xTIMEcomposer/Community_13.1.0//target/include/stdint.h" 3 4
typedef int64_t int_least64_t;
typedef uint64_t uint_least64_t;
# 163 "/home/vdelacruz/XMOS/xTIMEcomposer/Community_13.1.0//target/include/stdint.h" 3 4
  typedef signed int int_fast8_t;
  typedef unsigned int uint_fast8_t;




  typedef signed int int_fast16_t;
  typedef unsigned int uint_fast16_t;




  typedef signed int int_fast32_t;
  typedef unsigned int uint_fast32_t;
# 217 "/home/vdelacruz/XMOS/xTIMEcomposer/Community_13.1.0//target/include/stdint.h" 3 4
  typedef int_least64_t int_fast64_t;
  typedef uint_least64_t uint_fast64_t;







  typedef long long int intmax_t;
# 235 "/home/vdelacruz/XMOS/xTIMEcomposer/Community_13.1.0//target/include/stdint.h" 3 4
  typedef long long unsigned int uintmax_t;
# 247 "/home/vdelacruz/XMOS/xTIMEcomposer/Community_13.1.0//target/include/stdint.h" 3 4
typedef signed int intptr_t;
typedef unsigned int uintptr_t;
# 18 "/home/vdelacruz/XMOS/xTIMEcomposer/Community_13.1.0//target/include/inttypes.h" 2 3 4

# 1 "/home/vdelacruz/XMOS/xTIMEcomposer/Community_13.1.0//target/include/gcc/stddef.h" 1 3 4
# 326 "/home/vdelacruz/XMOS/xTIMEcomposer/Community_13.1.0//target/include/gcc/stddef.h" 3 4
typedef unsigned char wchar_t;
# 20 "/home/vdelacruz/XMOS/xTIMEcomposer/Community_13.1.0//target/include/inttypes.h" 2 3 4
# 296 "/home/vdelacruz/XMOS/xTIMEcomposer/Community_13.1.0//target/include/inttypes.h" 3 4
typedef struct {
  intmax_t quot;
  intmax_t rem;
} imaxdiv_t;





extern intmax_t imaxabs(intmax_t j);
extern imaxdiv_t imaxdiv(intmax_t numer, intmax_t denomer);
extern intmax_t strtoimax(const char * __restrict, char ** __restrict, int);
extern uintmax_t strtoumax(const char * __restrict, char ** __restrict, int);

extern intmax_t wcstoimax(const wchar_t * __restrict, wchar_t ** __restrict, int);
extern uintmax_t wcstoumax(const wchar_t * __restrict, wchar_t ** __restrict, int);
# 64 "/home/vdelacruz/Documents/Ethernet 2 Ports/module_xtcp/src/xtcp_uip/uip-conf.h" 2

# 1 "/home/vdelacruz/Documents/Ethernet 2 Ports/module_xtcp/src/xtcp_conf_derived.h" 1
# 66 "/home/vdelacruz/Documents/Ethernet 2 Ports/module_xtcp/src/xtcp_uip/uip-conf.h" 2
# 78 "/home/vdelacruz/Documents/Ethernet 2 Ports/module_xtcp/src/xtcp_uip/uip-conf.h"
typedef uint8_t u8_t;
# 87 "/home/vdelacruz/Documents/Ethernet 2 Ports/module_xtcp/src/xtcp_uip/uip-conf.h"
typedef uint16_t u16_t;
# 96 "/home/vdelacruz/Documents/Ethernet 2 Ports/module_xtcp/src/xtcp_uip/uip-conf.h"
typedef uint32_t u32_t;
# 106 "/home/vdelacruz/Documents/Ethernet 2 Ports/module_xtcp/src/xtcp_uip/uip-conf.h"
typedef unsigned short uip_stats_t;
# 193 "/home/vdelacruz/Documents/Ethernet 2 Ports/module_xtcp/src/xtcp_uip/uip-conf.h"
# 1 "/home/vdelacruz/Documents/Ethernet 2 Ports/module_xtcp/src/xtcp_server.h" 1







# 1 "/home/vdelacruz/XMOS/xTIMEcomposer/Community_13.1.0//target/include/xccompat.h" 1 3 4
# 122 "/home/vdelacruz/XMOS/xTIMEcomposer/Community_13.1.0//target/include/xccompat.h" 3 4
typedef unsigned chanend;






typedef unsigned timer;






typedef unsigned port;




typedef unsigned streaming_chanend_t;





typedef unsigned in_buffered_port_1_t;




typedef unsigned in_buffered_port_4_t;




typedef unsigned in_buffered_port_8_t;




typedef unsigned in_buffered_port_16_t;




typedef unsigned in_buffered_port_32_t;




typedef unsigned out_buffered_port_1_t;




typedef unsigned out_buffered_port_4_t;




typedef unsigned out_buffered_port_8_t;




typedef unsigned out_buffered_port_16_t;




typedef unsigned out_buffered_port_32_t;



typedef unsigned clock;
# 9 "/home/vdelacruz/Documents/Ethernet 2 Ports/module_xtcp/src/xtcp_server.h" 2
# 1 "/home/vdelacruz/Documents/Ethernet 2 Ports/module_xtcp/src/xtcp_client.h" 1
# 10 "/home/vdelacruz/Documents/Ethernet 2 Ports/module_xtcp/src/xtcp_client.h"
# 1 "/home/vdelacruz/Documents/Ethernet 2 Ports/module_xtcp/src/xtcp_conf_derived.h" 1
# 11 "/home/vdelacruz/Documents/Ethernet 2 Ports/module_xtcp/src/xtcp_client.h" 2
# 22 "/home/vdelacruz/Documents/Ethernet 2 Ports/module_xtcp/src/xtcp_client.h"
# 1 "/home/vdelacruz/Documents/Ethernet 2 Ports/module_xtcp/src/xtcp_bufinfo.h" 1
# 10 "/home/vdelacruz/Documents/Ethernet 2 Ports/module_xtcp/src/xtcp_bufinfo.h"
typedef struct xtcp_bufinfo_t {

  int rx_new_event;
  char *rx_buf;
  char *rx_end;
  char *rx_wrptr;
  char *rx_rdptr;

  char *tx_buf;
  char *tx_end;
  char *tx_wrptr;
  char *tx_rdptr;
  char *tx_prev_rdptr;
  int tx_lowmark;

} xtcp_bufinfo_t;
# 23 "/home/vdelacruz/Documents/Ethernet 2 Ports/module_xtcp/src/xtcp_client.h" 2







typedef unsigned int xtcp_appstate_t;
# 52 "/home/vdelacruz/Documents/Ethernet 2 Ports/module_xtcp/src/xtcp_client.h"
typedef unsigned char xtcp_ipaddr_t[4];
# 67 "/home/vdelacruz/Documents/Ethernet 2 Ports/module_xtcp/src/xtcp_client.h"
typedef struct xtcp_ipconfig_t {
  xtcp_ipaddr_t ipaddr;
  xtcp_ipaddr_t netmask;

  xtcp_ipaddr_t gateway;
} xtcp_ipconfig_t;







typedef enum xtcp_protocol_t {
  XTCP_PROTOCOL_TCP,
  XTCP_PROTOCOL_UDP
} xtcp_protocol_t;
# 93 "/home/vdelacruz/Documents/Ethernet 2 Ports/module_xtcp/src/xtcp_client.h"
typedef enum xtcp_event_type_t {
  XTCP_NEW_CONNECTION,
# 103 "/home/vdelacruz/Documents/Ethernet 2 Ports/module_xtcp/src/xtcp_client.h"
  XTCP_RECV_DATA,
# 115 "/home/vdelacruz/Documents/Ethernet 2 Ports/module_xtcp/src/xtcp_client.h"
  XTCP_REQUEST_DATA,







  XTCP_SENT_DATA,







  XTCP_RESEND_DATA,
# 140 "/home/vdelacruz/Documents/Ethernet 2 Ports/module_xtcp/src/xtcp_client.h"
  XTCP_TIMED_OUT,





  XTCP_ABORTED,






  XTCP_CLOSED,





  XTCP_POLL,




  XTCP_IFUP,



  XTCP_IFDOWN,


  XTCP_ALREADY_HANDLED


} xtcp_event_type_t;




typedef enum xtcp_connection_type_t {
  XTCP_CLIENT_CONNECTION,
  XTCP_SERVER_CONNECTION
} xtcp_connection_type_t;
# 193 "/home/vdelacruz/Documents/Ethernet 2 Ports/module_xtcp/src/xtcp_client.h"
typedef struct xtcp_connection_t {
  int id;
  xtcp_protocol_t protocol;
  xtcp_connection_type_t connection_type;
  xtcp_event_type_t event;
  xtcp_appstate_t appstate;


  xtcp_ipaddr_t remote_addr;
  unsigned int remote_port;
  unsigned int local_port;
  unsigned int mss;




} xtcp_connection_t;
# 261 "/home/vdelacruz/Documents/Ethernet 2 Ports/module_xtcp/src/xtcp_client.h"
# 1 "/home/vdelacruz/Documents/Ethernet 2 Ports/module_xtcp/src/xtcp_blocking_client.h" 1
# 18 "/home/vdelacruz/Documents/Ethernet 2 Ports/module_xtcp/src/xtcp_blocking_client.h"
void xtcp_wait_for_ifup(chanend tcp_svr);



xtcp_connection_t xtcp_wait_for_connection(chanend tcp_svr);
# 37 "/home/vdelacruz/Documents/Ethernet 2 Ports/module_xtcp/src/xtcp_blocking_client.h"
int xtcp_write(chanend tcp_svr,
               xtcp_connection_t *conn,
               unsigned char buf[],
               int len);
# 52 "/home/vdelacruz/Documents/Ethernet 2 Ports/module_xtcp/src/xtcp_blocking_client.h"
int xtcp_read(chanend tcp_svr,
              xtcp_connection_t *conn,
              unsigned char buf[],
              int minlen);
# 262 "/home/vdelacruz/Documents/Ethernet 2 Ports/module_xtcp/src/xtcp_client.h" 2
# 273 "/home/vdelacruz/Documents/Ethernet 2 Ports/module_xtcp/src/xtcp_client.h"
void xtcp_uint_to_ipaddr(xtcp_ipaddr_t ipaddr, unsigned int i);
# 284 "/home/vdelacruz/Documents/Ethernet 2 Ports/module_xtcp/src/xtcp_client.h"
void xtcp_listen(chanend c_xtcp, int port_number, xtcp_protocol_t proto);







void xtcp_unlisten(chanend c_xtcp, int port_number);
# 301 "/home/vdelacruz/Documents/Ethernet 2 Ports/module_xtcp/src/xtcp_client.h"
void xtcp_connect(chanend c_xtcp,
                  int port_number,
                  xtcp_ipaddr_t ipaddr,
                  xtcp_protocol_t proto);
# 313 "/home/vdelacruz/Documents/Ethernet 2 Ports/module_xtcp/src/xtcp_client.h"
void xtcp_bind_local(chanend c_xtcp,
                     xtcp_connection_t *conn,
                     int port_number);
# 329 "/home/vdelacruz/Documents/Ethernet 2 Ports/module_xtcp/src/xtcp_client.h"
void xtcp_bind_remote(chanend c_xtcp,
                      xtcp_connection_t *conn,
                      xtcp_ipaddr_t addr, int port_number);
# 348 "/home/vdelacruz/Documents/Ethernet 2 Ports/module_xtcp/src/xtcp_client.h"
void do_xtcp_event(chanend c_xtcp, xtcp_connection_t *conn);
# 362 "/home/vdelacruz/Documents/Ethernet 2 Ports/module_xtcp/src/xtcp_client.h"
void xtcp_init_send(chanend c_xtcp,
                    xtcp_connection_t *conn);
# 379 "/home/vdelacruz/Documents/Ethernet 2 Ports/module_xtcp/src/xtcp_client.h"
void xtcp_set_connection_appstate(chanend c_xtcp,
                                  xtcp_connection_t *conn,
                                  xtcp_appstate_t appstate);






void xtcp_close(chanend c_xtcp,
                xtcp_connection_t *conn);






void xtcp_abort(chanend c_xtcp,
                xtcp_connection_t *conn);
# 408 "/home/vdelacruz/Documents/Ethernet 2 Ports/module_xtcp/src/xtcp_client.h"
int xtcp_recv(chanend c_xtcp, char data[]);







void xtcp_ignore_recv(chanend c_xtcp);
# 431 "/home/vdelacruz/Documents/Ethernet 2 Ports/module_xtcp/src/xtcp_client.h"
int xtcp_recvi(chanend c_xtcp, char data[], int i);
# 453 "/home/vdelacruz/Documents/Ethernet 2 Ports/module_xtcp/src/xtcp_client.h"
int xtcp_recv_count(chanend c_xtcp, char data[], int count);
# 464 "/home/vdelacruz/Documents/Ethernet 2 Ports/module_xtcp/src/xtcp_client.h"
void xtcp_ack_recv_mode(chanend c_xtcp,
                        xtcp_connection_t *conn) ;
# 477 "/home/vdelacruz/Documents/Ethernet 2 Ports/module_xtcp/src/xtcp_client.h"
void xtcp_ack_recv(chanend c_xtcp,
                   xtcp_connection_t *conn);
# 494 "/home/vdelacruz/Documents/Ethernet 2 Ports/module_xtcp/src/xtcp_client.h"
void xtcp_send(chanend c_xtcp,
               char *data,
               int len);
# 507 "/home/vdelacruz/Documents/Ethernet 2 Ports/module_xtcp/src/xtcp_client.h"
inline void xtcp_complete_send(chanend c_xtcp) {



  xtcp_send(c_xtcp, (void *) 0, 0);

}
# 532 "/home/vdelacruz/Documents/Ethernet 2 Ports/module_xtcp/src/xtcp_client.h"
void xtcp_sendi(chanend c_xtcp,
                char *data,
                int i,
                int len);
# 547 "/home/vdelacruz/Documents/Ethernet 2 Ports/module_xtcp/src/xtcp_client.h"
void xtcp_set_poll_interval(chanend c_xtcp,
                            xtcp_connection_t *conn,
                            int poll_interval);
# 558 "/home/vdelacruz/Documents/Ethernet 2 Ports/module_xtcp/src/xtcp_client.h"
void xtcp_join_multicast_group(chanend c_xtcp,
                               xtcp_ipaddr_t addr);
# 569 "/home/vdelacruz/Documents/Ethernet 2 Ports/module_xtcp/src/xtcp_client.h"
void xtcp_leave_multicast_group(chanend c_xtcp,
                               xtcp_ipaddr_t addr);






void xtcp_get_mac_address(chanend c_xtcp, unsigned char mac_addr[]);
# 587 "/home/vdelacruz/Documents/Ethernet 2 Ports/module_xtcp/src/xtcp_client.h"
void xtcp_get_ipconfig(chanend c_xtcp,
                       xtcp_ipconfig_t *ipconfig);
# 598 "/home/vdelacruz/Documents/Ethernet 2 Ports/module_xtcp/src/xtcp_client.h"
void xtcp_pause(chanend c_xtcp,
                xtcp_connection_t *conn);
# 610 "/home/vdelacruz/Documents/Ethernet 2 Ports/module_xtcp/src/xtcp_client.h"
void xtcp_unpause(chanend c_xtcp,
                  xtcp_connection_t *conn);
# 620 "/home/vdelacruz/Documents/Ethernet 2 Ports/module_xtcp/src/xtcp_client.h"
void xtcp_accept_partial_ack(chanend c_xtcp,
                             xtcp_connection_t *conn);
# 10 "/home/vdelacruz/Documents/Ethernet 2 Ports/module_xtcp/src/xtcp_server.h" 2
# 1 "/home/vdelacruz/Documents/Ethernet 2 Ports/module_xtcp/src/xtcp_uip/xtcp_server_conf.h" 1





# 1 "/home/vdelacruz/Documents/Ethernet 2 Ports/module_xtcp/src/xtcp_uip/timer.h" 1
# 70 "/home/vdelacruz/Documents/Ethernet 2 Ports/module_xtcp/src/xtcp_uip/timer.h"
# 1 "/home/vdelacruz/Documents/Ethernet 2 Ports/module_xtcp/src/xtcp_uip/clock.h" 1
# 61 "/home/vdelacruz/Documents/Ethernet 2 Ports/module_xtcp/src/xtcp_uip/clock.h"
# 1 "/home/vdelacruz/Documents/Ethernet 2 Ports/module_xtcp/src/xtcp_uip/clock-arch.h" 1
# 42 "/home/vdelacruz/Documents/Ethernet 2 Ports/module_xtcp/src/xtcp_uip/clock-arch.h"
typedef int clock_time_t;
# 62 "/home/vdelacruz/Documents/Ethernet 2 Ports/module_xtcp/src/xtcp_uip/clock.h" 2
# 70 "/home/vdelacruz/Documents/Ethernet 2 Ports/module_xtcp/src/xtcp_uip/clock.h"
void clock_init(void);
# 79 "/home/vdelacruz/Documents/Ethernet 2 Ports/module_xtcp/src/xtcp_uip/clock.h"
clock_time_t clock_time(void);
# 71 "/home/vdelacruz/Documents/Ethernet 2 Ports/module_xtcp/src/xtcp_uip/timer.h" 2
# 80 "/home/vdelacruz/Documents/Ethernet 2 Ports/module_xtcp/src/xtcp_uip/timer.h"
struct uip_timer {
  clock_time_t start;
  clock_time_t interval;
};


void timer_set(struct uip_timer *t, clock_time_t interval);
void timer_reset(struct uip_timer *t);
void timer_restart(struct uip_timer *t);
int timer_expired(struct uip_timer *t);
# 7 "/home/vdelacruz/Documents/Ethernet 2 Ports/module_xtcp/src/xtcp_uip/xtcp_server_conf.h" 2
# 1 "/home/vdelacruz/Documents/Ethernet 2 Ports/module_xtcp/src/xtcp_client.h" 1
# 8 "/home/vdelacruz/Documents/Ethernet 2 Ports/module_xtcp/src/xtcp_uip/xtcp_server_conf.h" 2

typedef struct xtcp_server_state_t {
  int send_request;
  int abort_request;
  int close_request;
  int poll_interval;
  int connect_request;
  int ack_request;
  int closed;
  struct uip_timer tmr;
  int uip_conn;
  int ack_recv_mode;



} xtcp_server_state_t;
# 11 "/home/vdelacruz/Documents/Ethernet 2 Ports/module_xtcp/src/xtcp_server.h" 2
# 19 "/home/vdelacruz/Documents/Ethernet 2 Ports/module_xtcp/src/xtcp_server.h"
typedef struct xtcpd_state_t {
  unsigned int linknum;
  xtcp_connection_t conn;
  xtcp_server_state_t s;
} xtcpd_state_t;


void xtcpd_init(chanend xtcp[], int num_xtcp);

void xtcpd_send_event(chanend c, xtcp_event_type_t event,
                      xtcpd_state_t *s);

void xtcpd_send_null_event(chanend c);

void xtcpd_service_clients(chanend xtcp[], int num_xtcp);
void xtcpd_service_clients_until_ready(int waiting_link,
                                       chanend xtcp[],
                                       int num_xtcp);

void xtcpd_recv(chanend xtcp[],
                int linknum,
                int num_xtcp,
                xtcpd_state_t *s,
                unsigned char data[],
                int datalen);

int xtcpd_send(chanend c,
               xtcp_event_type_t event,
               xtcpd_state_t *s,
               unsigned char data[],
               int mss);

void xtcpd_get_mac_address(unsigned char []);

void xtcpd_server_init(void);

void xtcpd_queue_event(chanend c, int linknum, int event);
# 194 "/home/vdelacruz/Documents/Ethernet 2 Ports/module_xtcp/src/xtcp_uip/uip-conf.h" 2

void xtcpd_appcall(void);

typedef struct xtcpd_state_t uip_tcp_appstate_t;
typedef struct xtcpd_state_t uip_udp_appstate_t;
# 223 "/home/vdelacruz/Documents/Ethernet 2 Ports/module_xtcp/src/xtcp_uip/uip-conf.h"
# 1 "/home/vdelacruz/Documents/Ethernet 2 Ports/module_xtcp/src/xtcp_uip/dhcpc/dhcpc.h" 1
# 42 "/home/vdelacruz/Documents/Ethernet 2 Ports/module_xtcp/src/xtcp_uip/dhcpc/dhcpc.h"
# 1 "/home/vdelacruz/Documents/Ethernet 2 Ports/module_xtcp/src/xtcp_uip/timer.h" 1
# 43 "/home/vdelacruz/Documents/Ethernet 2 Ports/module_xtcp/src/xtcp_uip/dhcpc/dhcpc.h" 2
# 1 "/home/vdelacruz/Documents/Ethernet 2 Ports/module_xtcp/src/xtcp_uip/pt.h" 1
# 58 "/home/vdelacruz/Documents/Ethernet 2 Ports/module_xtcp/src/xtcp_uip/pt.h"
# 1 "/home/vdelacruz/Documents/Ethernet 2 Ports/module_xtcp/src/xtcp_uip/lc.h" 1
# 131 "/home/vdelacruz/Documents/Ethernet 2 Ports/module_xtcp/src/xtcp_uip/lc.h"
# 1 "/home/vdelacruz/Documents/Ethernet 2 Ports/module_xtcp/src/xtcp_uip/lc-switch.h" 1
# 70 "/home/vdelacruz/Documents/Ethernet 2 Ports/module_xtcp/src/xtcp_uip/lc-switch.h"
typedef unsigned short lc_t;
# 132 "/home/vdelacruz/Documents/Ethernet 2 Ports/module_xtcp/src/xtcp_uip/lc.h" 2
# 59 "/home/vdelacruz/Documents/Ethernet 2 Ports/module_xtcp/src/xtcp_uip/pt.h" 2

struct pt {
  lc_t lc;
};
# 44 "/home/vdelacruz/Documents/Ethernet 2 Ports/module_xtcp/src/xtcp_uip/dhcpc/dhcpc.h" 2

struct dhcpc_state {
  struct pt pt;
  char state;
  struct uip_udp_conn *conn;
  struct uip_timer timer;
  unsigned int ticks;
  const void *mac_addr;
  int mac_len;

  u8_t serverid[4];

  u16_t lease_time[2];
  u16_t ipaddr[2];
  u16_t netmask[2];
  u16_t dnsaddr[2];
  u16_t default_router[2];
};

void dhcpc_init(const void *mac_addr, int mac_len);
void dhcpc_request(void);

void dhcpc_appcall(void);

void dhcpc_configured(const struct dhcpc_state *s);
void dhcpc_start();
void dhcpc_stop();
# 224 "/home/vdelacruz/Documents/Ethernet 2 Ports/module_xtcp/src/xtcp_uip/uip-conf.h" 2
# 77 "/home/vdelacruz/Documents/Ethernet 2 Ports/module_xtcp/src/xtcp_uip/uipopt.h" 2
# 447 "/home/vdelacruz/Documents/Ethernet 2 Ports/module_xtcp/src/xtcp_uip/uipopt.h"
void uip_log(char msg[]);
# 63 "/home/vdelacruz/Documents/Ethernet 2 Ports/module_xtcp/src/xtcp_uip/uip.h" 2





typedef u16_t uip_ip4addr_t[2];
typedef u16_t uip_ip6addr_t[8];



typedef uip_ip4addr_t uip_ipaddr_t;
# 194 "/home/vdelacruz/Documents/Ethernet 2 Ports/module_xtcp/src/xtcp_uip/uip.h"
void uip_init(void);






void uip_setipid(u16_t id);
# 464 "/home/vdelacruz/Documents/Ethernet 2 Ports/module_xtcp/src/xtcp_uip/uip.h"
extern u8_t *uip_buf;
# 492 "/home/vdelacruz/Documents/Ethernet 2 Ports/module_xtcp/src/xtcp_uip/uip.h"
void uip_listen(u16_t port);
void uip_udp_listen(u16_t port);
# 507 "/home/vdelacruz/Documents/Ethernet 2 Ports/module_xtcp/src/xtcp_uip/uip.h"
void uip_unlisten(u16_t port);
void uip_udp_unlisten(u16_t port);
# 542 "/home/vdelacruz/Documents/Ethernet 2 Ports/module_xtcp/src/xtcp_uip/uip.h"
struct uip_conn *uip_connect(uip_ipaddr_t *ripaddr, u16_t port);
# 582 "/home/vdelacruz/Documents/Ethernet 2 Ports/module_xtcp/src/xtcp_uip/uip.h"
void uip_send(const void *data, int len);
# 818 "/home/vdelacruz/Documents/Ethernet 2 Ports/module_xtcp/src/xtcp_uip/uip.h"
struct uip_udp_conn *uip_udp_new(uip_ipaddr_t *ripaddr, u16_t rport);
# 934 "/home/vdelacruz/Documents/Ethernet 2 Ports/module_xtcp/src/xtcp_uip/uip.h"
void uip_ipaddr_copy(void *dest, const void *src);
# 960 "/home/vdelacruz/Documents/Ethernet 2 Ports/module_xtcp/src/xtcp_uip/uip.h"
int uip_ipaddr_cmp(const void *addr1, const void *addr2);
# 1136 "/home/vdelacruz/Documents/Ethernet 2 Ports/module_xtcp/src/xtcp_uip/uip.h"
u16_t htons(u16_t val);
# 1151 "/home/vdelacruz/Documents/Ethernet 2 Ports/module_xtcp/src/xtcp_uip/uip.h"
extern void *uip_appdata;
# 1186 "/home/vdelacruz/Documents/Ethernet 2 Ports/module_xtcp/src/xtcp_uip/uip.h"
extern u16_t uip_len;
# 1206 "/home/vdelacruz/Documents/Ethernet 2 Ports/module_xtcp/src/xtcp_uip/uip.h"
struct uip_conn {
  uip_ipaddr_t ripaddr;

  u16_t lport;
  u16_t rport;


  u8_t rcv_nxt[4];

  u8_t snd_nxt[4];

  u16_t len;
  u16_t mss;

  u16_t initialmss;

  u8_t sa;

  u8_t sv;

  u8_t rto;
  u8_t tcpstateflags;
  u8_t timer;
  u8_t nrtx;






  uip_tcp_appstate_t appstate;
};







extern struct uip_conn *uip_conn;

extern struct uip_conn uip_conns[10];
# 1256 "/home/vdelacruz/Documents/Ethernet 2 Ports/module_xtcp/src/xtcp_uip/uip.h"
extern u8_t uip_acc32[4];
# 1265 "/home/vdelacruz/Documents/Ethernet 2 Ports/module_xtcp/src/xtcp_uip/uip.h"
struct uip_udp_conn {
  uip_ipaddr_t ripaddr;
  u16_t lport;
  u16_t rport;
  u8_t ttl;
  u8_t udpflags;


  uip_udp_appstate_t appstate;
};
# 1292 "/home/vdelacruz/Documents/Ethernet 2 Ports/module_xtcp/src/xtcp_uip/uip.h"
extern struct uip_udp_conn *uip_udp_conn;
extern struct uip_udp_conn uip_udp_conns[10];







struct uip_stats {
  struct {
    uip_stats_t drop;

    uip_stats_t recv;

    uip_stats_t sent;

    uip_stats_t vhlerr;

    uip_stats_t hblenerr;

    uip_stats_t lblenerr;

    uip_stats_t fragerr;

    uip_stats_t chkerr;

    uip_stats_t protoerr;

  } ip;
  struct {
    uip_stats_t drop;
    uip_stats_t recv;
    uip_stats_t sent;
    uip_stats_t typeerr;

  } icmp;
  struct {
    uip_stats_t drop;
    uip_stats_t recv;
    uip_stats_t sent;
    uip_stats_t chkerr;

    uip_stats_t ackerr;

    uip_stats_t rst;
    uip_stats_t rexmit;
    uip_stats_t syndrop;

    uip_stats_t synrst;

  } tcp;

  struct {
    uip_stats_t drop;
    uip_stats_t recv;
    uip_stats_t sent;
    uip_stats_t chkerr;

  } udp;

};






extern struct uip_stats uip_stat;
# 1374 "/home/vdelacruz/Documents/Ethernet 2 Ports/module_xtcp/src/xtcp_uip/uip.h"
extern u32_t uip_flags;
# 1419 "/home/vdelacruz/Documents/Ethernet 2 Ports/module_xtcp/src/xtcp_uip/uip.h"
void uip_process(u8_t flag);
# 1460 "/home/vdelacruz/Documents/Ethernet 2 Ports/module_xtcp/src/xtcp_uip/uip.h"
struct uip_tcpip_hdr {
# 1471 "/home/vdelacruz/Documents/Ethernet 2 Ports/module_xtcp/src/xtcp_uip/uip.h"
  u8_t vhl,
    tos,
    len[2],
    ipid[2],
    ipoffset[2],
    ttl,
    proto;
  u16_t ipchksum;
  u16_t srcipaddr[2],
    destipaddr[2];



  u16_t srcport,
    destport;
  u8_t seqno[4],
    ackno[4],
    tcpoffset,
    flags,
    wnd[2];
  u16_t tcpchksum;
  u8_t urgp[2];
  u8_t optdata[4];
};


struct uip_icmpip_hdr {
# 1508 "/home/vdelacruz/Documents/Ethernet 2 Ports/module_xtcp/src/xtcp_uip/uip.h"
  u8_t vhl,
    tos,
    len[2],
    ipid[2],
    ipoffset[2],
    ttl,
    proto;
  u16_t ipchksum;
  u16_t srcipaddr[2],
    destipaddr[2];



  u8_t type, icode;
  u16_t icmpchksum;

  u16_t id, seqno;





};



struct uip_udpip_hdr {
# 1545 "/home/vdelacruz/Documents/Ethernet 2 Ports/module_xtcp/src/xtcp_uip/uip.h"
  u8_t vhl,
    tos,
    len[2],
    ipid[2],
    ipoffset[2],
    ttl,
    proto;
  u16_t ipchksum;
  u16_t srcipaddr[2],
    destipaddr[2];



  u16_t srcport,
    destport;
  u16_t udplen;
  u16_t udpchksum;
};
# 1609 "/home/vdelacruz/Documents/Ethernet 2 Ports/module_xtcp/src/xtcp_uip/uip.h"
extern uip_ipaddr_t uip_hostaddr, uip_netmask, uip_draddr;







struct uip_eth_addr {
  u8_t addr[6];
};
# 1637 "/home/vdelacruz/Documents/Ethernet 2 Ports/module_xtcp/src/xtcp_uip/uip.h"
u16_t uip_chksum(u16_t *buf, u16_t len);
# 1648 "/home/vdelacruz/Documents/Ethernet 2 Ports/module_xtcp/src/xtcp_uip/uip.h"
u16_t uip_ipchksum(void);
# 1659 "/home/vdelacruz/Documents/Ethernet 2 Ports/module_xtcp/src/xtcp_uip/uip.h"
u16_t uip_tcpchksum(void);
# 1670 "/home/vdelacruz/Documents/Ethernet 2 Ports/module_xtcp/src/xtcp_uip/uip.h"
u16_t uip_udpchksum(void);
# 88 "/home/vdelacruz/Documents/Ethernet 2 Ports/module_xtcp/src/xtcp_uip/uip.c" 2

# 1 "/home/vdelacruz/Documents/Ethernet 2 Ports/module_xtcp/src/xtcp_uip/uip_arch.h" 1
# 93 "/home/vdelacruz/Documents/Ethernet 2 Ports/module_xtcp/src/xtcp_uip/uip_arch.h"
__attribute__ ((noinline))
void xtcp_copy_word(u8_t*d, u8_t* s);

__attribute__ ((noinline))
void uip_add32(u8_t *op32, u16_t op16);
# 118 "/home/vdelacruz/Documents/Ethernet 2 Ports/module_xtcp/src/xtcp_uip/uip_arch.h"
u16_t uip_chksum(u16_t *buf, u16_t len);
# 129 "/home/vdelacruz/Documents/Ethernet 2 Ports/module_xtcp/src/xtcp_uip/uip_arch.h"
u16_t uip_ipchksum(void);
# 144 "/home/vdelacruz/Documents/Ethernet 2 Ports/module_xtcp/src/xtcp_uip/uip_arch.h"
u16_t uip_tcpchksum(void);

u16_t uip_udpchksum(void);
# 90 "/home/vdelacruz/Documents/Ethernet 2 Ports/module_xtcp/src/xtcp_uip/uip.c" 2
# 1 "/home/vdelacruz/XMOS/xTIMEcomposer/Community_13.1.0//target/include/print.h" 1 3 4
# 34 "/home/vdelacruz/XMOS/xTIMEcomposer/Community_13.1.0//target/include/print.h" 3 4
int printchar(char value);





int printcharln(char value);





int printint(int value);





int printintln(int value);





int printuint(unsigned value);





int printuintln(unsigned value);





int printllong(long long value);





int printllongln(long long value);





int printullong(unsigned long long value);





int printullongln(unsigned long long value);






int printhex(unsigned value);






int printhexln(unsigned value);






int printllonghex(unsigned long long value);






int printllonghexln(unsigned long long value);
# 125 "/home/vdelacruz/XMOS/xTIMEcomposer/Community_13.1.0//target/include/print.h" 3 4
int printstr(const char *s);
# 135 "/home/vdelacruz/XMOS/xTIMEcomposer/Community_13.1.0//target/include/print.h" 3 4
int printstrln(const char *s);
# 91 "/home/vdelacruz/Documents/Ethernet 2 Ports/module_xtcp/src/xtcp_uip/uip.c" 2

# 1 "/home/vdelacruz/XMOS/xTIMEcomposer/Community_13.1.0//target/include/xclib.h" 1 3 4
# 35 "/home/vdelacruz/XMOS/xTIMEcomposer/Community_13.1.0//target/include/xclib.h" 3 4
unsigned bitrev(unsigned x);
# 46 "/home/vdelacruz/XMOS/xTIMEcomposer/Community_13.1.0//target/include/xclib.h" 3 4
unsigned byterev(unsigned x);
# 59 "/home/vdelacruz/XMOS/xTIMEcomposer/Community_13.1.0//target/include/xclib.h" 3 4
int clz(unsigned x);
# 93 "/home/vdelacruz/Documents/Ethernet 2 Ports/module_xtcp/src/xtcp_uip/uip.c" 2
# 102 "/home/vdelacruz/Documents/Ethernet 2 Ports/module_xtcp/src/xtcp_uip/uip.c"
# 1 "/home/vdelacruz/XMOS/xTIMEcomposer/Community_13.1.0//target/include/string.h" 1 3 4
# 12 "/home/vdelacruz/XMOS/xTIMEcomposer/Community_13.1.0//target/include/string.h" 3 4
# 1 "/home/vdelacruz/XMOS/xTIMEcomposer/Community_13.1.0//target/include/sys/reent.h" 1 3 4
# 13 "/home/vdelacruz/XMOS/xTIMEcomposer/Community_13.1.0//target/include/sys/reent.h" 3 4
# 1 "/home/vdelacruz/XMOS/xTIMEcomposer/Community_13.1.0//target/include/_ansi.h" 1 3 4
# 14 "/home/vdelacruz/XMOS/xTIMEcomposer/Community_13.1.0//target/include/sys/reent.h" 2 3 4
# 1 "/home/vdelacruz/XMOS/xTIMEcomposer/Community_13.1.0//target/include/sys/_types.h" 1 3 4
# 12 "/home/vdelacruz/XMOS/xTIMEcomposer/Community_13.1.0//target/include/sys/_types.h" 3 4
# 1 "/home/vdelacruz/XMOS/xTIMEcomposer/Community_13.1.0//target/include/machine/_types.h" 1 3 4






# 1 "/home/vdelacruz/XMOS/xTIMEcomposer/Community_13.1.0//target/include/machine/_default_types.h" 1 3 4
# 26 "/home/vdelacruz/XMOS/xTIMEcomposer/Community_13.1.0//target/include/machine/_default_types.h" 3 4
typedef signed char __int8_t ;
typedef unsigned char __uint8_t ;
# 36 "/home/vdelacruz/XMOS/xTIMEcomposer/Community_13.1.0//target/include/machine/_default_types.h" 3 4
typedef signed short __int16_t;
typedef unsigned short __uint16_t;
# 46 "/home/vdelacruz/XMOS/xTIMEcomposer/Community_13.1.0//target/include/machine/_default_types.h" 3 4
typedef __int16_t __int_least16_t;
typedef __uint16_t __uint_least16_t;
# 58 "/home/vdelacruz/XMOS/xTIMEcomposer/Community_13.1.0//target/include/machine/_default_types.h" 3 4
typedef signed int __int32_t;
typedef unsigned int __uint32_t;
# 76 "/home/vdelacruz/XMOS/xTIMEcomposer/Community_13.1.0//target/include/machine/_default_types.h" 3 4
typedef __int32_t __int_least32_t;
typedef __uint32_t __uint_least32_t;
# 99 "/home/vdelacruz/XMOS/xTIMEcomposer/Community_13.1.0//target/include/machine/_default_types.h" 3 4
typedef signed long long __int64_t;
typedef unsigned long long __uint64_t;
# 8 "/home/vdelacruz/XMOS/xTIMEcomposer/Community_13.1.0//target/include/machine/_types.h" 2 3 4
# 13 "/home/vdelacruz/XMOS/xTIMEcomposer/Community_13.1.0//target/include/sys/_types.h" 2 3 4
# 1 "/home/vdelacruz/XMOS/xTIMEcomposer/Community_13.1.0//target/include/sys/lock.h" 1 3 4







typedef int _LOCK_SIMPLE_T;

typedef struct {

  unsigned _counter;


  unsigned _owner;
} _LOCK_FAIR_T;

typedef struct {
  int _owner;
  int _count;
} _LOCK_RECURSIVE_T;
# 30 "/home/vdelacruz/XMOS/xTIMEcomposer/Community_13.1.0//target/include/sys/lock.h" 3 4
void __lock_simple_init(volatile _LOCK_SIMPLE_T *);
void __lock_simple_close(volatile _LOCK_SIMPLE_T *);
void __lock_simple_acquire(volatile _LOCK_SIMPLE_T *);
int __lock_simple_try_acquire(volatile _LOCK_SIMPLE_T *);
void __lock_simple_release(volatile _LOCK_SIMPLE_T *);

void __lock_fair_init(volatile _LOCK_FAIR_T *);
void __lock_fair_close(volatile _LOCK_FAIR_T *);
void __lock_fair_acquire(volatile _LOCK_FAIR_T *);
int __lock_fair_try_acquire(volatile _LOCK_FAIR_T *);
void __lock_fair_release(volatile _LOCK_FAIR_T *);

void __lock_recursive_init(volatile _LOCK_RECURSIVE_T *);
void __lock_recursive_close(volatile _LOCK_RECURSIVE_T *);
void __lock_recursive_acquire(volatile _LOCK_RECURSIVE_T *);
int __lock_recursive_try_acquire(volatile _LOCK_RECURSIVE_T *);
void __lock_recursive_release(volatile _LOCK_RECURSIVE_T *);

typedef _LOCK_FAIR_T _LOCK_T;
# 14 "/home/vdelacruz/XMOS/xTIMEcomposer/Community_13.1.0//target/include/sys/_types.h" 2 3 4


typedef long _off_t;







typedef short __dev_t;




typedef unsigned short __uid_t;


typedef unsigned short __gid_t;
# 45 "/home/vdelacruz/XMOS/xTIMEcomposer/Community_13.1.0//target/include/sys/_types.h" 3 4
typedef long _fpos_t;
# 57 "/home/vdelacruz/XMOS/xTIMEcomposer/Community_13.1.0//target/include/sys/_types.h" 3 4
typedef int _ssize_t;






# 1 "/home/vdelacruz/XMOS/xTIMEcomposer/Community_13.1.0//target/include/gcc/stddef.h" 1 3 4
# 355 "/home/vdelacruz/XMOS/xTIMEcomposer/Community_13.1.0//target/include/gcc/stddef.h" 3 4
typedef unsigned int wint_t;
# 65 "/home/vdelacruz/XMOS/xTIMEcomposer/Community_13.1.0//target/include/sys/_types.h" 2 3 4



typedef struct
{
  int __count;
  union
  {
    wint_t __wch;
    unsigned char __wchb[4];
  } __value;
} _mbstate_t;



typedef _LOCK_RECURSIVE_T _flock_t;




typedef void *_iconv_t;
# 15 "/home/vdelacruz/XMOS/xTIMEcomposer/Community_13.1.0//target/include/sys/reent.h" 2 3 4






typedef unsigned long __ULong;
# 36 "/home/vdelacruz/XMOS/xTIMEcomposer/Community_13.1.0//target/include/sys/reent.h" 3 4
struct _reent;
# 45 "/home/vdelacruz/XMOS/xTIMEcomposer/Community_13.1.0//target/include/sys/reent.h" 3 4
struct __sbuf {
 unsigned char *_base;
 int _size;
};
# 78 "/home/vdelacruz/XMOS/xTIMEcomposer/Community_13.1.0//target/include/sys/reent.h" 3 4
struct __sFILE {
  unsigned char *_p;
  int _r;
  int _w;
  short _flags;
  short _file;
  struct __sbuf _bf;
  int _lbfsize;


  void * _cookie;

  int (*_read) (struct _reent *, void *, char *, int);

  int (*_write) (struct _reent *, void *, const char *, int);

  _fpos_t (*_seek) (struct _reent *, void *, _fpos_t, int);
  int (*_close) (struct _reent *, void *);


  struct __sbuf _ub;
  unsigned char *_up;
  int _ur;


  unsigned char _ubuf[3];
  unsigned char _nbuf[1];


  struct __sbuf _lb;


  int _blksize;
  int _offset;


  _flock_t _lock;

};
# 172 "/home/vdelacruz/XMOS/xTIMEcomposer/Community_13.1.0//target/include/sys/reent.h" 3 4
typedef struct __sFILE __FILE;



struct _glue
{
  struct _glue *_next;
  int _niobs;
  __FILE *_iobs;
};







struct _reent;

extern void _cleanup (void);

extern __FILE *__stdin, *__stdout, *__stderr;

__FILE * __getstdin (void);
__FILE * __getstdout (void);
__FILE * __getstderr (void);
# 13 "/home/vdelacruz/XMOS/xTIMEcomposer/Community_13.1.0//target/include/string.h" 2 3 4


# 1 "/home/vdelacruz/XMOS/xTIMEcomposer/Community_13.1.0//target/include/gcc/stddef.h" 1 3 4
# 214 "/home/vdelacruz/XMOS/xTIMEcomposer/Community_13.1.0//target/include/gcc/stddef.h" 3 4
typedef unsigned int size_t;
# 16 "/home/vdelacruz/XMOS/xTIMEcomposer/Community_13.1.0//target/include/string.h" 2 3 4







void * memchr (const void *, int, size_t);
int memcmp (const void *, const void *, size_t);
void * memcpy (void *, const void *, size_t);
void * memmove (void *, const void *, size_t);
void * memset (void *, int, size_t);
char *strcat (char *, const char *);
char *strchr (const char *, int);
int strcmp (const char *__s1, const char *__s2);

int strcoll (const char *, const char *);

char *strcpy (char *, const char *);
size_t strcspn (const char *__s1, const char *__s2);
char *strerror (int);
size_t strlen (const char *__s);
char *strncat (char *, const char *, size_t);
int strncmp (const char *__s1, const char *__s2, size_t);
char *strncpy (char *, const char *, size_t);
char *strpbrk (const char *, const char *);
char *strrchr (const char *, int);
size_t strspn (const char *__s1, const char *__s2);
char *strstr (const char *, const char *);

char *strtok (char *, const char *);



size_t strxfrm (char *, const char *, size_t);



char *strtok_r (char *, const char *, char **);

int bcmp (const void *, const void *, size_t);
void bcopy (const void *, void *, size_t);
void bzero (void *, size_t);
int ffs (int);
char *index (const char *, int);
void * memccpy (void *, const void *, int, size_t);
void * mempcpy (void *, const void *, size_t);
void * memmem (const void *, size_t, const void *, size_t);
char *rindex (const char *, int);
char *stpcpy (char *, const char *);
char *stpncpy (char *, const char *, size_t);
int strcasecmp (const char *, const char *);
char *strcasestr (const char *, const char *);
char *strdup (const char *);
char *strndup (const char *, size_t);
char *strerror_r (int, char *, size_t);
size_t strlcat (char *, const char *, size_t);
size_t strlcpy (char *, const char *, size_t);
int strncasecmp (const char *, const char *, size_t);
size_t strnlen (const char *, size_t);
char *strsep (char **, const char *);
char *strlwr (char *);
char *strupr (char *);
# 102 "/home/vdelacruz/XMOS/xTIMEcomposer/Community_13.1.0//target/include/string.h" 3 4
# 1 "/home/vdelacruz/XMOS/xTIMEcomposer/Community_13.1.0//target/include/sys/string.h" 1 3 4
# 103 "/home/vdelacruz/XMOS/xTIMEcomposer/Community_13.1.0//target/include/string.h" 2 3 4


# 103 "/home/vdelacruz/Documents/Ethernet 2 Ports/module_xtcp/src/xtcp_uip/uip.c" 2
# 121 "/home/vdelacruz/Documents/Ethernet 2 Ports/module_xtcp/src/xtcp_uip/uip.c"
uip_ipaddr_t uip_hostaddr, uip_draddr, uip_netmask;


static const uip_ipaddr_t all_ones_addr =



  { 0xffff, 0xffff };

static const uip_ipaddr_t all_zeroes_addr =



  { 0x0000, 0x0000 };
# 145 "/home/vdelacruz/Documents/Ethernet 2 Ports/module_xtcp/src/xtcp_uip/uip.c"
struct uip_eth_addr uip_ethaddr = { { 0, 0, 0, 0, 0, 0 } };







void *uip_appdata;

void *uip_sappdata;
# 165 "/home/vdelacruz/Documents/Ethernet 2 Ports/module_xtcp/src/xtcp_uip/uip.c"
u16_t uip_len, uip_slen;
# 174 "/home/vdelacruz/Documents/Ethernet 2 Ports/module_xtcp/src/xtcp_uip/uip.c"
u32_t uip_flags;


struct uip_conn *uip_conn;


struct uip_conn uip_conns[10];


u16_t uip_listenports[10];



u16_t uip_udp_listenports[10];



struct uip_udp_conn *uip_udp_conn;
struct uip_udp_conn uip_udp_conns[10];


static u16_t ipid;



void uip_setipid(u16_t id) {
 ipid = id;
}

static u8_t iss[4];



static u16_t lastport;




u8_t uip_acc32[4];
static u8_t c, opt;
static u16_t tmp16;
# 270 "/home/vdelacruz/Documents/Ethernet 2 Ports/module_xtcp/src/xtcp_uip/uip.c"
static void xtcp_swap_words(u8_t* a, u8_t* b)
{
 short c;

 c = *(short*)(&a[0]);
 *(short*)(&a[0]) = *(short*)(&b[0]);
 *(short*)(&b[0]) = (short)c;

 c = *(short*)(&a[2]);
 *(short*)(&a[2]) = *(short*)(&b[2]);
 *(short*)(&b[2]) = (short)c;
}

static void xtcp_increment_word(u8_t* a)
{
 unsigned s = ((*(short*)(&a[2])) << 16) + *(short*)(&a[0]);
 s = __builtin_bswap32(__builtin_bswap32(s)+1);
 *(short*)(&a[0]) = (short)s;
 *(short*)(&((struct uip_tcpip_hdr *)&uip_buf[14])->ackno[2]) = (short)(s >> 16);
}

__attribute__ ((noinline))
void xtcp_copy_word(u8_t*d, u8_t* s)
{
 *(short*)(&d[0]) = *(short*)(&s[0]);
 *(short*)(&d[2]) = *(short*)(&s[2]);
}

__attribute__ ((noinline))
static int xtcp_compare_words(const u8_t* a, const u8_t* b)
{
 return (*(short*)(&a[0]) == *(short*)(&b[0])) &&
     (*(short*)(&a[2]) == *(short*)(&b[2]));
}
# 320 "/home/vdelacruz/Documents/Ethernet 2 Ports/module_xtcp/src/xtcp_uip/uip.c"
__attribute__ ((noinline))
void uip_add32(u8_t *op32, u16_t op16) {
   unsigned int *res = (unsigned int *)uip_acc32;
   unsigned int x = ((*(unsigned short*)(&op32[2])) << 16) + *(unsigned short*)(&op32[0]);
   x = __builtin_bswap32(x);
   *res = __builtin_bswap32(x + op16);
}



void uip_ipaddr_copy(void *dest, const void *src)
{
 xtcp_copy_word((u8_t*)dest, (u8_t*)src);
}

int uip_ipaddr_cmp(const void *addr1, const void *addr2)
{
    return xtcp_compare_words(addr1, addr2);
}




static int onesReduce(unsigned int sum, int carry) {
    sum = (sum & 0xffff) + (sum >> 16) + carry;
    return (sum & 0xffff) + (sum >> 16);
}

static u16_t chksum(u16_t sum, const u8_t *byte_data, u16_t lengthInBytes) {
    int i;
    short* data = (short*)byte_data;
    unsigned s = sum;
    for(i = 0; i < (lengthInBytes>>1); i++) {
        s += __builtin_bswap32(data[i]) >> 16;
    }
    if (lengthInBytes & 1) {
        s += byte_data[2*i] << 8;
    }
    sum = onesReduce(s, 0);
    return sum;
}



u16_t uip_chksum(u16_t *data, u16_t len) {
 return htons(chksum(0, (u8_t *) data, len));
}


u16_t uip_ipchksum(void) {
 u16_t sum;

 sum = chksum(0, &uip_buf[14], 20);
 ;
 return (sum == 0) ? 0xffff : htons(sum);
}


static u16_t upper_layer_chksum(u8_t proto) {
 u16_t upper_layer_len;
 u16_t sum;




 upper_layer_len = (((u16_t)(((struct uip_tcpip_hdr *)&uip_buf[14])->len[0]) << 8) + ((struct uip_tcpip_hdr *)&uip_buf[14])->len[1]) - 20;





 sum = upper_layer_len + proto;

 sum = chksum(sum, (u8_t *) &((struct uip_tcpip_hdr *)&uip_buf[14])->srcipaddr[0], 2 * sizeof(uip_ipaddr_t));


 sum = chksum(sum, &uip_buf[20 + 14], upper_layer_len);

 return (sum == 0) ? 0xffff : htons(sum);
}
# 410 "/home/vdelacruz/Documents/Ethernet 2 Ports/module_xtcp/src/xtcp_uip/uip.c"
u16_t uip_tcpchksum(void) {
 return upper_layer_chksum(6);
}


u16_t
uip_udpchksum(void)
{
 return upper_layer_chksum(17);
}



void uip_init(void) {
 memset(uip_listenports, 0, sizeof(uip_listenports));
 memset(uip_udp_listenports, 0, sizeof(uip_listenports));
 memset(uip_conns, 0, sizeof(uip_conns));

 lastport = 1024;



 memset(uip_udp_conns, 0, sizeof(uip_udp_conns));

}



struct uip_conn *
uip_connect(uip_ipaddr_t *ripaddr, u16_t rport)
{
 register struct uip_conn *conn, *cconn;


 again:
 ++lastport;

 if(lastport >= 32000) {
  lastport = 4096;
 }


 for(c = 0; c < 10; ++c) {
  conn = &uip_conns[c];
  if(conn->tcpstateflags != 0 &&
    conn->lport == htons(lastport)) {
   goto again;
  }
 }

 conn = 0;
 for(c = 0; c < 10; ++c) {
  cconn = &uip_conns[c];
  if(cconn->tcpstateflags == 0) {
   conn = cconn;
   break;
  }
  if(cconn->tcpstateflags == 7) {
   if(conn == 0 ||
     cconn->timer > conn->timer) {
    conn = cconn;
   }
  }
 }

 if(conn == 0) {

  return 0;
 }

 conn->tcpstateflags = 2;

 conn->snd_nxt[0] = iss[0];
 conn->snd_nxt[1] = iss[1];
 conn->snd_nxt[2] = iss[2];
 conn->snd_nxt[3] = iss[3];

 conn->initialmss = conn->mss = (((1472) + 14 + (20 + 20)) - 14 - (20 + 20));

 conn->len = 1;
 conn->nrtx = 0;
 conn->timer = 1;
 conn->rto = 3;
 conn->sa = 0;
 conn->sv = 16;
 conn->lport = htons(lastport);
 conn->rport = rport;
 uip_ipaddr_copy(&conn->ripaddr, ripaddr);



 return conn;
}



struct uip_udp_conn *
uip_udp_new(uip_ipaddr_t *ripaddr, u16_t rport)
{
 register struct uip_udp_conn *conn;


 again:
 ++lastport;

 if(lastport >= 32000) {
  lastport = 4096;
 }

 for(c = 0; c < 10; ++c) {
  if(uip_udp_conns[c].lport == htons(lastport)) {
   goto again;
  }
 }

 conn = 0;
 for(c = 0; c < 10; ++c) {
  if(uip_udp_conns[c].lport == 0) {
   conn = &uip_udp_conns[c];
   break;
  }
 }

 if(conn == 0) {
  return 0;
 }

 conn->lport = (u16_t)((((u16_t) (lastport)) << 8) | (((u16_t) (lastport)) >> 8));
 conn->rport = rport;

 if(ripaddr == 0) {
  memset(conn->ripaddr, 0, sizeof(uip_ipaddr_t));
 } else {
  uip_ipaddr_copy(&conn->ripaddr, ripaddr);
 }
 conn->ttl = 64;
 conn->udpflags = 0;
 return conn;
}


void uip_unlisten(u16_t port) {
 for (c = 0; c < 10; ++c) {
  if (uip_listenports[c] == port) {
   uip_listenports[c] = 0;
   return;
  }
 }
}

void uip_udp_unlisten(u16_t port) {
 for (c = 0; c < 10; ++c) {
  if (uip_udp_listenports[c] == port) {
   uip_udp_listenports[c] = 0;
   return;
  }
 }
}

void uip_listen(u16_t port) {
 for (c = 0; c < 10; ++c) {
  if (uip_listenports[c] == 0) {
   uip_listenports[c] = port;
   return;
  }
 }
}

void uip_udp_listen(u16_t port) {
 for (c = 0; c < 10; ++c) {
  if (uip_udp_listenports[c] == 0) {
   uip_udp_listenports[c] = port;
   return;
  }
 }
}
# 725 "/home/vdelacruz/Documents/Ethernet 2 Ports/module_xtcp/src/xtcp_uip/uip.c"
static void uip_add_rcv_nxt(u16_t n) {
 uip_add32(uip_conn->rcv_nxt, n);
 xtcp_copy_word(uip_conn->rcv_nxt, uip_acc32);
}


void xtcpd_init_send_from_uip(struct uip_conn *conn);

void uip_process(u8_t flag) {
 register struct uip_conn *uip_connr = uip_conn;
# 744 "/home/vdelacruz/Documents/Ethernet 2 Ports/module_xtcp/src/xtcp_uip/uip.c"
 if(flag == 4) {
  goto udp_send;
 }


 uip_sappdata = uip_appdata = &uip_buf[(20 + 20) + 14];



 if (flag == 3) {
  if ((uip_connr->tcpstateflags & 15) == 3



                    && !((uip_connr)->len)

                    ) {
   uip_flags = 8;
                        uip_len = 0;
                        uip_slen = 0;
   xtcpd_appcall();
   goto appsend;
  }
  goto drop;


 } else if (flag == 2) {






  xtcp_increment_word(iss);


  uip_len = 0;
  uip_slen = 0;





  if (uip_connr->tcpstateflags == 7
    || uip_connr->tcpstateflags == 5) {
   ++(uip_connr->timer);
   if (uip_connr->timer == 120) {
    uip_connr->tcpstateflags = 0;
   }
  } else if (uip_connr->tcpstateflags != 0) {



   if (((uip_connr)->len)) {
    if (uip_connr->timer-- == 0) {
     if (uip_connr->nrtx == 8
       || ((uip_connr->tcpstateflags == 2
         || uip_connr->tcpstateflags == 1)
         && uip_connr->nrtx == 5)) {
      uip_connr->tcpstateflags = 0;




      uip_flags = 128;
      xtcpd_appcall();


      ((struct uip_tcpip_hdr *)&uip_buf[14])->flags = 0x04 | 0x10;
      goto tcp_send_nodata;
     }


     uip_connr->timer = 3 << (uip_connr->nrtx > 4 ? 4
       : uip_connr->nrtx);
     ++(uip_connr->nrtx);







     ;
     switch (uip_connr->tcpstateflags & 15) {
     case 1:


      goto tcp_send_synack;


     case 2:

      ((struct uip_tcpip_hdr *)&uip_buf[14])->flags = 0;
      goto tcp_send_syn;


     case 3:




      uip_flags = 4;
      xtcpd_appcall();
      goto apprexmit;

     case 4:
     case 6:
     case 8:

      goto tcp_send_finack;

     }
    }
   } else if ((uip_connr->tcpstateflags & 15)
     == 3) {


    uip_flags = 8;
    xtcpd_appcall();
    goto appsend;
   }
  }
  goto drop;
 }

 if(flag == 5 || flag == 7) {
  if(uip_udp_conn->lport != 0) {
   uip_conn = 0;
   uip_sappdata = uip_appdata = &uip_buf[14 + (8 + 20)];
   uip_len = uip_slen = 0;
   if (flag == 7) {
    uip_flags = 1;
    uip_udp_conn->udpflags ^= 2;
   }
   else
   uip_flags = 8;
   xtcpd_appcall();
   goto udp_send;
  } else {
   goto drop;
  }
 }
 else if(flag == 6) {
  if(uip_udp_conn->lport != 0 &&
    (uip_udp_conn->udpflags & 1)) {
   uip_conn = 0;
   uip_sappdata = uip_appdata = &uip_buf[14 + (8 + 20)];
   uip_len = uip_slen = 0;
   uip_flags = 4;
   uip_udp_conn->udpflags ^= 1;
   xtcpd_appcall();
   goto udp_send;
  } else {
   goto drop;
  }
 }




 ;
# 919 "/home/vdelacruz/Documents/Ethernet 2 Ports/module_xtcp/src/xtcp_uip/uip.c"
 if (((struct uip_tcpip_hdr *)&uip_buf[14])->vhl != 0x45) {
  ; ; ;



  goto drop;
 }
# 935 "/home/vdelacruz/Documents/Ethernet 2 Ports/module_xtcp/src/xtcp_uip/uip.c"
 if ((((struct uip_tcpip_hdr *)&uip_buf[14])->len[0] << 8) + ((struct uip_tcpip_hdr *)&uip_buf[14])->len[1] <= uip_len) {
  uip_len = (((struct uip_tcpip_hdr *)&uip_buf[14])->len[0] << 8) + ((struct uip_tcpip_hdr *)&uip_buf[14])->len[1];
# 949 "/home/vdelacruz/Documents/Ethernet 2 Ports/module_xtcp/src/xtcp_uip/uip.c"
 } else {
  ;
  goto drop;
 }



 if ((((struct uip_tcpip_hdr *)&uip_buf[14])->ipoffset[0] & 0x3f) != 0 || ((struct uip_tcpip_hdr *)&uip_buf[14])->ipoffset[1] != 0) {






  ; ; ;
  goto drop;

 }


 if (uip_ipaddr_cmp(uip_hostaddr, all_zeroes_addr)) {
# 983 "/home/vdelacruz/Documents/Ethernet 2 Ports/module_xtcp/src/xtcp_uip/uip.c"
 } else {



  ;
  if(((struct uip_tcpip_hdr *)&uip_buf[14])->proto == 17 &&
    (uip_ipaddr_cmp(((struct uip_tcpip_hdr *)&uip_buf[14])->destipaddr, all_ones_addr) ||
                ((((u16_t *)((struct uip_tcpip_hdr *)&uip_buf[14])->destipaddr)[0] & 0xff) == 224))

                               ) {
   goto udp_input;
  }




  if (!uip_ipaddr_cmp(((struct uip_tcpip_hdr *)&uip_buf[14])->destipaddr, uip_hostaddr)



    ) {
   ;
   goto drop;
  }
# 1019 "/home/vdelacruz/Documents/Ethernet 2 Ports/module_xtcp/src/xtcp_uip/uip.c"
 }


 if (uip_ipchksum() != 0xffff) {

  ; ; ;
  goto drop;
 }


 if (((struct uip_tcpip_hdr *)&uip_buf[14])->proto == 6) {


  goto tcp_input;
 }


 if(((struct uip_tcpip_hdr *)&uip_buf[14])->proto == 17) {
  goto udp_input;
 }
# 1051 "/home/vdelacruz/Documents/Ethernet 2 Ports/module_xtcp/src/xtcp_uip/uip.c"
 if (((struct uip_tcpip_hdr *)&uip_buf[14])->proto != 1) {

  ; ; ;
  goto drop;
 }




 ;




 if (((struct uip_icmpip_hdr *)&uip_buf[14])->type != 8) {
  ; ; ;
  goto drop;
 }
# 1080 "/home/vdelacruz/Documents/Ethernet 2 Ports/module_xtcp/src/xtcp_uip/uip.c"
 ((struct uip_icmpip_hdr *)&uip_buf[14])->type = 0;

 if (((struct uip_icmpip_hdr *)&uip_buf[14])->icmpchksum >= (u16_t)((((u16_t) (0xffff - (8 << 8))) << 8) | (((u16_t) (0xffff - (8 << 8))) >> 8))) {
  ((struct uip_icmpip_hdr *)&uip_buf[14])->icmpchksum += (u16_t)((((u16_t) (8 << 8)) << 8) | (((u16_t) (8 << 8)) >> 8)) + 1;
 } else {
  ((struct uip_icmpip_hdr *)&uip_buf[14])->icmpchksum += (u16_t)((((u16_t) (8 << 8)) << 8) | (((u16_t) (8 << 8)) >> 8));
 }


 uip_ipaddr_copy(((struct uip_tcpip_hdr *)&uip_buf[14])->destipaddr, ((struct uip_tcpip_hdr *)&uip_buf[14])->srcipaddr);
 uip_ipaddr_copy(((struct uip_tcpip_hdr *)&uip_buf[14])->srcipaddr, uip_hostaddr);

 ;
 goto send;
# 1167 "/home/vdelacruz/Documents/Ethernet 2 Ports/module_xtcp/src/xtcp_uip/uip.c"
 udp_input:






 uip_len = uip_len - (8 + 20);
 uip_appdata = &uip_buf[14 + (8 + 20)];
 if(((struct uip_udpip_hdr *)&uip_buf[14])->udpchksum != 0 && uip_udpchksum() != 0xffff) {
  ;
  ;
  ;
  goto drop;
 }





 for(uip_udp_conn = &uip_udp_conns[0];
   uip_udp_conn < &uip_udp_conns[10];
   ++uip_udp_conn) {
# 1214 "/home/vdelacruz/Documents/Ethernet 2 Ports/module_xtcp/src/xtcp_uip/uip.c"
  if(uip_udp_conn->lport != 0 &&
    ((struct uip_udpip_hdr *)&uip_buf[14])->destport == uip_udp_conn->lport &&
    ((struct uip_udpip_hdr *)&uip_buf[14])->srcport == uip_udp_conn->rport &&
    (uip_ipaddr_cmp(((struct uip_udpip_hdr *)&uip_buf[14])->srcipaddr, uip_udp_conn->ripaddr)
                || (((struct uip_udpip_hdr *)&uip_buf[14])->destport == 0x4400)
                || (((((u16_t *)uip_udp_conn->ripaddr)[0] & 0xff) == 224)))
          )
  {
   goto udp_found;
  }
 }

 tmp16 = ((struct uip_tcpip_hdr *)&uip_buf[14])->destport;

 for(c = 0; c < 10; ++c) {
  if(tmp16 == uip_udp_listenports[c]) {
   uip_udp_conn = 0;
   for(c = 0; c < 10; ++c) {
    if(uip_udp_conns[c].lport == 0) {
     uip_udp_conn = &uip_udp_conns[c];
     break;
    }
   }
   if (uip_udp_conn != 0) {
    uip_udp_conn->lport = tmp16;
    uip_udp_conn->rport = ((struct uip_udpip_hdr *)&uip_buf[14])->srcport;
    uip_udp_conn->ttl = 64;
    uip_udp_conn->udpflags = 0;
    uip_flags = 64 | 2;
    uip_ipaddr_copy(uip_udp_conn->ripaddr, ((struct uip_udpip_hdr *)&uip_buf[14])->srcipaddr);
    goto udp_found_listener;
   }
  }
 }


 goto drop;

 udp_found:
 uip_flags = 2;
 udp_found_listener:
 uip_conn = 0;
 uip_sappdata = uip_appdata = &uip_buf[14 + (8 + 20)];
 uip_slen = 0;
 xtcpd_appcall();
 udp_send:
 if(uip_slen == 0) {
  goto drop;
 }
 uip_len = uip_slen + (8 + 20);







 ((struct uip_tcpip_hdr *)&uip_buf[14])->len[0] = (uip_len >> 8);
 ((struct uip_tcpip_hdr *)&uip_buf[14])->len[1] = (uip_len & 0xff);


 ((struct uip_tcpip_hdr *)&uip_buf[14])->ttl = uip_udp_conn->ttl;
 ((struct uip_tcpip_hdr *)&uip_buf[14])->proto = 17;

 ((struct uip_udpip_hdr *)&uip_buf[14])->udplen = (u16_t)((((u16_t) (uip_slen + 8)) << 8) | (((u16_t) (uip_slen + 8)) >> 8));
 ((struct uip_udpip_hdr *)&uip_buf[14])->udpchksum = 0;

 ((struct uip_tcpip_hdr *)&uip_buf[14])->srcport = uip_udp_conn->lport;
 ((struct uip_tcpip_hdr *)&uip_buf[14])->destport = uip_udp_conn->rport;

 uip_ipaddr_copy(((struct uip_tcpip_hdr *)&uip_buf[14])->srcipaddr, uip_hostaddr);
 uip_ipaddr_copy(((struct uip_tcpip_hdr *)&uip_buf[14])->destipaddr, uip_udp_conn->ripaddr);

 uip_appdata = &uip_buf[14 + (20 + 20)];



 ((struct uip_udpip_hdr *)&uip_buf[14])->udpchksum = ~(uip_udpchksum());
 if(((struct uip_udpip_hdr *)&uip_buf[14])->udpchksum == 0) {
  ((struct uip_udpip_hdr *)&uip_buf[14])->udpchksum = 0xffff;
 }


 goto ip_send_nolen;



 tcp_input: ;



 if (uip_tcpchksum() != 0xffff) {

  ; ; ;
  goto drop;
 }



 for (uip_connr = &uip_conns[0]; uip_connr <= &uip_conns[10 - 1]; ++uip_connr) {
  if (uip_connr->tcpstateflags != 0 && ((struct uip_tcpip_hdr *)&uip_buf[14])->destport
    == uip_connr->lport && ((struct uip_tcpip_hdr *)&uip_buf[14])->srcport == uip_connr->rport
    && uip_ipaddr_cmp(((struct uip_tcpip_hdr *)&uip_buf[14])->srcipaddr, uip_connr->ripaddr)) {
   goto found;
  }
 }





 if ((((struct uip_tcpip_hdr *)&uip_buf[14])->flags & 0x3f) != 0x02) {
  goto reset;
 }

 tmp16 = ((struct uip_tcpip_hdr *)&uip_buf[14])->destport;

 for (c = 0; c < 10; ++c) {
  if (tmp16 == uip_listenports[c])
   goto found_listen;
 }


 ;
 reset:


 if (((struct uip_tcpip_hdr *)&uip_buf[14])->flags & 0x04) {
  goto drop;
 }

 ;

 ((struct uip_tcpip_hdr *)&uip_buf[14])->flags = 0x04 | 0x10;
 uip_len = (20 + 20);
 ((struct uip_tcpip_hdr *)&uip_buf[14])->tcpoffset = 5 << 4;


 xtcp_swap_words(((struct uip_tcpip_hdr *)&uip_buf[14])->seqno, ((struct uip_tcpip_hdr *)&uip_buf[14])->ackno);




 xtcp_increment_word(((struct uip_tcpip_hdr *)&uip_buf[14])->ackno);



 tmp16 = ((struct uip_tcpip_hdr *)&uip_buf[14])->srcport;
 ((struct uip_tcpip_hdr *)&uip_buf[14])->srcport = ((struct uip_tcpip_hdr *)&uip_buf[14])->destport;
 ((struct uip_tcpip_hdr *)&uip_buf[14])->destport = tmp16;


 uip_ipaddr_copy(((struct uip_tcpip_hdr *)&uip_buf[14])->destipaddr, ((struct uip_tcpip_hdr *)&uip_buf[14])->srcipaddr);
 uip_ipaddr_copy(((struct uip_tcpip_hdr *)&uip_buf[14])->srcipaddr, uip_hostaddr);


 goto tcp_send_noconn;




 found_listen:






 uip_connr = 0;
 for (c = 0; c < 10; ++c) {
  if (uip_conns[c].tcpstateflags == 0) {
   uip_connr = &uip_conns[c];
   break;
  }
  if (uip_conns[c].tcpstateflags == 7) {
   if (uip_connr == 0 || uip_conns[c].timer > uip_connr->timer) {
    uip_connr = &uip_conns[c];
   }
  }
 }

 if (uip_connr == 0) {



  ; ;
  goto drop;
 }
 uip_conn = uip_connr;


 uip_connr->rto = uip_connr->timer = 3;
 uip_connr->sa = 0;
 uip_connr->sv = 4;
 uip_connr->nrtx = 0;
 uip_connr->lport = ((struct uip_tcpip_hdr *)&uip_buf[14])->destport;
 uip_connr->rport = ((struct uip_tcpip_hdr *)&uip_buf[14])->srcport;
 uip_ipaddr_copy(uip_connr->ripaddr, ((struct uip_tcpip_hdr *)&uip_buf[14])->srcipaddr);
 uip_connr->tcpstateflags = 1;

 xtcp_copy_word(uip_connr->snd_nxt, iss);
 uip_connr->len = 1;


 xtcp_copy_word(uip_connr->rcv_nxt, ((struct uip_tcpip_hdr *)&uip_buf[14])->seqno);
 uip_add_rcv_nxt(1);


 if ((((struct uip_tcpip_hdr *)&uip_buf[14])->tcpoffset & 0xf0) > 0x50) {
  for (c = 0; c < ((((struct uip_tcpip_hdr *)&uip_buf[14])->tcpoffset >> 4) - 5) << 2;) {
   opt = uip_buf[(20 + 20) + 14 + c];
   if (opt == 0) {

    break;
   } else if (opt == 1) {
    ++c;

   } else if (opt == 2 && uip_buf[(20 + 20)
     + 14 + 1 + c] == 4) {

    tmp16 = ((u16_t) uip_buf[(20 + 20) + 14 + 2 + c]
      << 8) | (u16_t) uip_buf[(20 + 20) + 14
      + 3 + c];
    uip_connr->initialmss = uip_connr->mss
      = tmp16 > (((1472) + 14 + (20 + 20)) - 14 - (20 + 20)) ? (((1472) + 14 + (20 + 20)) - 14 - (20 + 20)) : tmp16;


    break;
   } else {


    if (uip_buf[(20 + 20) + 14 + 1 + c] == 0) {


     break;
    }
    c += uip_buf[(20 + 20) + 14 + 1 + c];
   }
  }
 }



 tcp_send_synack:
 ((struct uip_tcpip_hdr *)&uip_buf[14])->flags = 0x10;

 tcp_send_syn:
 ((struct uip_tcpip_hdr *)&uip_buf[14])->flags |= 0x02;






 ((struct uip_tcpip_hdr *)&uip_buf[14])->optdata[0] = 2;
 ((struct uip_tcpip_hdr *)&uip_buf[14])->optdata[1] = 4;
 ((struct uip_tcpip_hdr *)&uip_buf[14])->optdata[2] = ((((1472) + 14 + (20 + 20)) - 14 - (20 + 20))) / 256;
 ((struct uip_tcpip_hdr *)&uip_buf[14])->optdata[3] = ((((1472) + 14 + (20 + 20)) - 14 - (20 + 20))) & 255;
 uip_len = (20 + 20) + 4;
 ((struct uip_tcpip_hdr *)&uip_buf[14])->tcpoffset = ((20 + 4) / 4) << 4;
 goto tcp_send;


 found: uip_conn = uip_connr;
 uip_flags = 0;




 if (((struct uip_tcpip_hdr *)&uip_buf[14])->flags & 0x04) {
  uip_connr->tcpstateflags = 0;
  ;
  uip_flags = 32;
  xtcpd_appcall();
  goto drop;
 }


 c = (((struct uip_tcpip_hdr *)&uip_buf[14])->tcpoffset >> 4) << 2;



 uip_len = uip_len - c - 20;




 if (!(((uip_connr->tcpstateflags & 15) == 2)
   && ((((struct uip_tcpip_hdr *)&uip_buf[14])->flags & 0x3f) == (0x02 | 0x10)))) {
  if ((uip_len > 0 || ((((struct uip_tcpip_hdr *)&uip_buf[14])->flags & (0x02 | 0x01)) != 0))
                    && (!xtcp_compare_words(((struct uip_tcpip_hdr *)&uip_buf[14])->seqno, uip_connr->rcv_nxt))) {
   goto tcp_send_ack;
  }
 }





 if ((((struct uip_tcpip_hdr *)&uip_buf[14])->flags & 0x10) && ((uip_connr)->len)) {
               uip_add32(uip_connr->snd_nxt, uip_connr->len);






               if ((xtcp_compare_words(((struct uip_tcpip_hdr *)&uip_buf[14])->ackno, uip_acc32)))

                  {




                    xtcp_copy_word(uip_connr->snd_nxt, uip_acc32);



   if (uip_connr->nrtx == 0) {
    signed char m;
    m = uip_connr->rto - uip_connr->timer;

    m = m - (uip_connr->sa >> 3);
    uip_connr->sa += m;
    if (m < 0) {
     m = -m;
    }
    m = m - (uip_connr->sv >> 2);
    uip_connr->sv += m;
    uip_connr->rto = (uip_connr->sa >> 3) + uip_connr->sv;

   }


                        uip_flags = 1;


   uip_connr->timer = uip_connr->rto;
# 1562 "/home/vdelacruz/Documents/Ethernet 2 Ports/module_xtcp/src/xtcp_uip/uip.c"
   uip_connr->len = 0;

                    }

 }

        if (((struct uip_tcpip_hdr *)&uip_buf[14])->flags & 0x08) {
          uip_flags |= 256;
        }


 switch (uip_connr->tcpstateflags & 15) {




 case 1:




  if (uip_flags & 1) {
   uip_connr->tcpstateflags = 3;
   uip_flags = 64;
   uip_connr->len = 0;
   if (uip_len > 0) {
    uip_flags |= 2;
    uip_add_rcv_nxt(uip_len);
   }
   uip_slen = 0;
   xtcpd_appcall();
   goto appsend;
  }
  goto drop;

  case 2:




  if((uip_flags & 1) &&
    (((struct uip_tcpip_hdr *)&uip_buf[14])->flags & 0x3f) == (0x02 | 0x10)) {


   if((((struct uip_tcpip_hdr *)&uip_buf[14])->tcpoffset & 0xf0) > 0x50) {
    for(c = 0; c < ((((struct uip_tcpip_hdr *)&uip_buf[14])->tcpoffset >> 4) - 5) << 2;) {
     opt = uip_buf[(20 + 20) + 14 + c];
     if(opt == 0) {

      break;
     } else if(opt == 1) {
      ++c;

     } else if(opt == 2 &&
       uip_buf[(20 + 20) + 14 + 1 + c] == 4) {

      tmp16 = (uip_buf[(20 + 20) + 14 + 2 + c] << 8) |
      uip_buf[(20 + 20) + 14 + 3 + c];
      uip_connr->initialmss =
      uip_connr->mss = tmp16 > (((1472) + 14 + (20 + 20)) - 14 - (20 + 20))? (((1472) + 14 + (20 + 20)) - 14 - (20 + 20)): tmp16;


      break;
     } else {


      if(uip_buf[(20 + 20) + 14 + 1 + c] == 0) {


       break;
      }
      c += uip_buf[(20 + 20) + 14 + 1 + c];
     }
    }
   }
   uip_connr->tcpstateflags = 3;
   xtcp_copy_word(uip_connr->rcv_nxt, ((struct uip_tcpip_hdr *)&uip_buf[14])->seqno);
   uip_add_rcv_nxt(1);
   uip_flags = 64 | 2;
   uip_connr->len = 0;
   uip_len = 0;
   uip_slen = 0;
   xtcpd_appcall();
   goto appsend;
  }

  uip_flags = 32;
  xtcpd_appcall();

  uip_conn->tcpstateflags = 0;
  goto reset;


 case 3:
# 1667 "/home/vdelacruz/Documents/Ethernet 2 Ports/module_xtcp/src/xtcp_uip/uip.c"
  if (((struct uip_tcpip_hdr *)&uip_buf[14])->flags & 0x01 && !(uip_connr->tcpstateflags & 16)) {
   if (((uip_connr)->len)) {
    goto drop;
   }
   uip_add_rcv_nxt(1 + uip_len);
   uip_flags |= 16;
   if (uip_len > 0) {
    uip_flags |= 2;
   }
   xtcpd_appcall();
   uip_connr->len = 1;
   uip_connr->tcpstateflags = 8;
   uip_connr->nrtx = 0;
   tcp_send_finack: ((struct uip_tcpip_hdr *)&uip_buf[14])->flags = 0x01 | 0x10;
   goto tcp_send_nodata;
  }



  if ((((struct uip_tcpip_hdr *)&uip_buf[14])->flags & 0x20) != 0) {
# 1700 "/home/vdelacruz/Documents/Ethernet 2 Ports/module_xtcp/src/xtcp_uip/uip.c"
   uip_appdata = ((char *) uip_appdata) + ((((struct uip_tcpip_hdr *)&uip_buf[14])->urgp[0] << 8)
     | ((struct uip_tcpip_hdr *)&uip_buf[14])->urgp[1]);
   uip_len -= (((struct uip_tcpip_hdr *)&uip_buf[14])->urgp[0] << 8) | ((struct uip_tcpip_hdr *)&uip_buf[14])->urgp[1];

  }






  if (uip_len > 0

                    && !(uip_connr->tcpstateflags & 16)

                    ) {
   uip_flags |= 2;
   uip_add_rcv_nxt(uip_len);
  }
# 1732 "/home/vdelacruz/Documents/Ethernet 2 Ports/module_xtcp/src/xtcp_uip/uip.c"
  tmp16 = ((u16_t)((struct uip_tcpip_hdr *)&uip_buf[14])->wnd[0] << 8) + (u16_t)((struct uip_tcpip_hdr *)&uip_buf[14])->wnd[1];
  if (tmp16 > uip_connr->initialmss || tmp16 == 0) {
   tmp16 = uip_connr->initialmss;
  }
  uip_connr->mss = tmp16;
# 1754 "/home/vdelacruz/Documents/Ethernet 2 Ports/module_xtcp/src/xtcp_uip/uip.c"
  if (uip_flags & (2 | 1)) {
   uip_slen = 0;
   xtcpd_appcall();

   appsend:

   if (uip_flags & 32) {
    uip_slen = 0;
    uip_connr->tcpstateflags = 0;
    ((struct uip_tcpip_hdr *)&uip_buf[14])->flags = 0x04 | 0x10;
    goto tcp_send_nodata;
   }

   if (uip_flags & 16) {
    uip_slen = 0;
    uip_connr->len = 1;
    uip_connr->tcpstateflags = 4;
    uip_connr->nrtx = 0;
    ((struct uip_tcpip_hdr *)&uip_buf[14])->flags = 0x01 | 0x10;
    goto tcp_send_nodata;
   }


                        uip_connr->nrtx = 0;


   if (uip_slen > 0) {
# 1798 "/home/vdelacruz/Documents/Ethernet 2 Ports/module_xtcp/src/xtcp_uip/uip.c"
    if ((uip_flags & 1) != 0) {
     uip_connr->len = 0;
    }





    if (uip_connr->len == 0) {




     if (uip_slen > uip_connr->mss) {
      uip_slen = uip_connr->mss;
     }



           uip_connr->len = uip_slen;

    } else {





                                  uip_slen = uip_connr->len;

    }

   }



   apprexmit: uip_appdata = uip_sappdata;



   if (uip_slen > 0 && uip_connr->len > 0) {

    uip_len = uip_connr->len + (20 + 20);

    ((struct uip_tcpip_hdr *)&uip_buf[14])->flags = 0x10 | 0x08;

    goto tcp_send_noopts;
   }


   if (uip_flags & 2) {
    uip_len = (20 + 20);
    ((struct uip_tcpip_hdr *)&uip_buf[14])->flags = 0x10;
    goto tcp_send_noopts;
   }
  }
  goto drop;
 case 8:


  if (uip_flags & 1) {
   uip_connr->tcpstateflags = 0;
   uip_flags = 16;
   xtcpd_appcall();
  }
  break;

 case 4:



  if (uip_len > 0) {
   uip_add_rcv_nxt(uip_len);
  }
  if (((struct uip_tcpip_hdr *)&uip_buf[14])->flags & 0x01) {
   if (uip_flags & 1) {
    uip_connr->tcpstateflags = 7;
    uip_connr->timer = 0;
    uip_connr->len = 0;
   } else {
    uip_connr->tcpstateflags = 6;
   }
   uip_add_rcv_nxt(1);
   uip_flags = 16;
   xtcpd_appcall();
   goto tcp_send_ack;
  } else if (uip_flags & 1) {
   uip_connr->tcpstateflags = 5;
   uip_connr->len = 0;
   goto drop;
  }
  if (uip_len > 0) {
   goto tcp_send_ack;
  }
  goto drop;

 case 5:
  if (uip_len > 0) {
   uip_add_rcv_nxt(uip_len);
  }
  if (((struct uip_tcpip_hdr *)&uip_buf[14])->flags & 0x01) {
   uip_connr->tcpstateflags = 7;
   uip_connr->timer = 0;
   uip_add_rcv_nxt(1);
   uip_flags = 16;
   xtcpd_appcall();
   goto tcp_send_ack;
  }
  if (uip_len > 0) {
   goto tcp_send_ack;
  }
  goto drop;

 case 7:
  goto tcp_send_ack;

 case 6:
  if (uip_flags & 1) {
   uip_connr->tcpstateflags = 7;
   uip_connr->timer = 0;
  }
 }
 goto drop;



 tcp_send_ack: ((struct uip_tcpip_hdr *)&uip_buf[14])->flags = 0x10;
 tcp_send_nodata: uip_len = (20 + 20);
 tcp_send_noopts: ((struct uip_tcpip_hdr *)&uip_buf[14])->tcpoffset = (20 / 4) << 4;
 tcp_send:




 xtcp_copy_word(((struct uip_tcpip_hdr *)&uip_buf[14])->ackno, uip_connr->rcv_nxt);

 xtcp_copy_word(((struct uip_tcpip_hdr *)&uip_buf[14])->seqno, uip_connr->snd_nxt);
# 1948 "/home/vdelacruz/Documents/Ethernet 2 Ports/module_xtcp/src/xtcp_uip/uip.c"
 ((struct uip_tcpip_hdr *)&uip_buf[14])->proto = 6;

 ((struct uip_tcpip_hdr *)&uip_buf[14])->srcport = uip_connr->lport;
 ((struct uip_tcpip_hdr *)&uip_buf[14])->destport = uip_connr->rport;

 uip_ipaddr_copy(((struct uip_tcpip_hdr *)&uip_buf[14])->srcipaddr, uip_hostaddr);
 uip_ipaddr_copy(((struct uip_tcpip_hdr *)&uip_buf[14])->destipaddr, uip_connr->ripaddr);

 if (uip_connr->tcpstateflags & 16) {


  ((struct uip_tcpip_hdr *)&uip_buf[14])->wnd[0] = ((struct uip_tcpip_hdr *)&uip_buf[14])->wnd[1] = 0;
 } else {
  ((struct uip_tcpip_hdr *)&uip_buf[14])->wnd[0] = (((((1472) + 14 + (20 + 20)) - 14 - (20 + 20))) >> 8);
  ((struct uip_tcpip_hdr *)&uip_buf[14])->wnd[1] = (((((1472) + 14 + (20 + 20)) - 14 - (20 + 20))) & 0xff);
 }

 tcp_send_noconn: ((struct uip_tcpip_hdr *)&uip_buf[14])->ttl = 64;






 ((struct uip_tcpip_hdr *)&uip_buf[14])->len[0] = (uip_len >> 8);
 ((struct uip_tcpip_hdr *)&uip_buf[14])->len[1] = (uip_len & 0xff);


 ((struct uip_tcpip_hdr *)&uip_buf[14])->urgp[0] = ((struct uip_tcpip_hdr *)&uip_buf[14])->urgp[1] = 0;



 ip_send_nolen:






 ((struct uip_tcpip_hdr *)&uip_buf[14])->vhl = 0x45;
 ((struct uip_tcpip_hdr *)&uip_buf[14])->tos = 0;
 ((struct uip_tcpip_hdr *)&uip_buf[14])->ipoffset[0] = ((struct uip_tcpip_hdr *)&uip_buf[14])->ipoffset[1] = 0;
 ++ipid;
 ((struct uip_tcpip_hdr *)&uip_buf[14])->ipid[0] = ipid >> 8;
 ((struct uip_tcpip_hdr *)&uip_buf[14])->ipid[1] = ipid & 0xff;

 ((struct uip_tcpip_hdr *)&uip_buf[14])->ipchksum = 0;
 ((struct uip_tcpip_hdr *)&uip_buf[14])->ipchksum = ~(uip_ipchksum());
 ;


 ;
 send: ;


 ;

 uip_flags = 0;
 return;
 drop: uip_len = 0;
 uip_flags = 0;
 return;
}

u16_t htons(u16_t val) {
 return (u16_t)((((u16_t) (val)) << 8) | (((u16_t) (val)) >> 8));
}

void uip_send(const void *data, int len) {
 if (len > 0) {
  uip_slen = len;
  if (data != uip_sappdata) {
   memcpy(uip_sappdata, (data), uip_slen);
  }
 }
}
